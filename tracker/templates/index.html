{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Expense Tracker</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>

<header>
    <h1>ðŸ’° Expense Tracker</h1>
    <p>Track your daily expenses smartly</p>
</header>

<div class="summary-wrapper">

    <div class="balance-card">
        <h2>Current Balance</h2>
        <p>â‚¹ {{ current_balance }}</p>
    </div>

    <div class="income-expense-row">
        <div class="small-card income">
            <h3>Total Income</h3>
            <p>â‚¹ {{ total_income }}</p>
        </div>

        <div class="small-card expense">
            <h3>Total Expenses</h3>
            <p>â‚¹ {{ total_expense }}</p>
        </div>
    </div>

</div>

<div class="container">

    <!-- Add Expense Section -->
    <div class="card">
        <h2>Add Transaction</h2>

        <form method="POST">
            {% csrf_token %}

            <div class="form-group">
                <label>Title</label>
                <input type="text" name="title" placeholder="Expense title">               

            </div>

            <div class="form-group">
                <label>Amount</label>
                <input type="number" name="amount" placeholder="Amount" required>
            </div>

            <div class="form-group">
                <label>Category</label>
                <select name="category" required>
                    <option value="">Select category</option>
                    <option value="Food">Food</option>
                    <option value="Travel">Travel</option>
                    <option value="Shopping">Shopping</option>
                    <option value="Bills">Bills</option>
                </select>
            </div>

            <div class="form-group">
                <label>Date</label>
                <input type="datetime-local" name="datetime">
            </div>

            <button class="btn" type="submit">Add Transaction</button>

        </form>
    </div>

 <!-- Expense List Section -->
<div class="card">
    <h2>Transaction History</h2>

    <table>
        <thead>
            <tr>
                <th>Title</th> 
                <th>Amount</th>
                <th>Category</th>
                <th>Date</th>
                <th>Action</th>
            </tr>
        </thead>

        <tbody>
            {% for transaction in transactions %}
            <tr>
                <td>{{ transaction.expenses_type }}</td>
                <td>â‚¹ {{ transaction.amount }}</td>
                <td>{{ transaction.category }}</td>
                <td>{{ transaction.created_at }}</td>

                <td>
                <form method="POST" action="{% url 'delete_transaction' transaction.id %}">
                        {% csrf_token %}
                        <button type="submit" class="delete-btn"
                                onclick="return confirm('Delete this transaction?');">
                            Delete
                        </button>
                    </form>
                </td>
            </tr>

            {% empty %}
            <tr>
                <td colspan="5" class="no-data">No transactions yet</td>
            </tr>
            {% endfor %}
        </tbody>

    </table>
</div>


<footer>
    <p>Â© 2026 Expense Tracker</p>
</footer>

</body>
</html>
